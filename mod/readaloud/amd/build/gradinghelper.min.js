define(["jquery","core/log"],function(a,b){"use strict";return b.debug("Readaloud grading helper: initialising"),{controls:{},hiddenplayer:"mod_readaloud_hidden_player",hiddenplayerbutton:"mod_readaloud_hidden_player_button",activebutton:"mod_readaloud_hidden_player_button_active",activebuttonpaused:"mod_readaloud_hidden_player_button_paused",activebuttonplaying:"mod_readaloud_hidden_player_button_playing",init:function(a){this.hiddenplayer=a.hiddenplayerclass,this.hiddenplayerbutton=a.hiddenplayerbuttonclass,this.register_controls(),this.register_events()},register_controls:function(){this.controls.hiddenplayer=a("."+this.hiddenplayer),this.controls.hiddenplayerbutton=a("."+this.hiddenplayerbutton)},register_events:function(){var b=this,c=this.controls.hiddenplayer;this.controls.hiddenplayerbutton.click(function(d){var e=a(this).attr("data-audiosource");e!=c.attr("src")||c.prop("paused")?b.dohiddenplay(e):b.dohiddenstop()})},dohiddenplay:function(a){var b=this,c=b.controls.hiddenplayer;c.attr("src",a),c[0].pause(),c[0].load();var d=c[0].play();void 0!==d&&d.then(function(){})["catch"](function(a){}),b.dobuttonicons()},dohiddenstop:function(){var a=this,b=a.controls.hiddenplayer;b[0].pause(),a.dobuttonicons()},dobuttonicons:function(b){var c=this,d=c.controls.hiddenplayer;b||(b=d.attr("src")),c.controls.hiddenplayerbutton.each(function(e){var f=a(this).attr("data-audiosource");f==b?(a(this).addClass(c.activebutton),d.prop("paused")?(a(this).removeClass(c.activebuttonplaying),a(this).addClass(c.activebuttonpaused),a(this).removeClass(c.activebutton)):(a(this).removeClass(c.activebuttonpaused),a(this).addClass(c.activebuttonplaying))):(a(this).removeClass(c.activebutton),a(this).removeClass(c.activebuttonplaying),a(this).removeClass(c.activebuttonpaused))})}}});